<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fruit Fista ‚Äì Nearby Shops</title>

<style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Arial', sans-serif; }

    body {
        background: linear-gradient(135deg, #fceabb, #f8b500);
        overflow: hidden;
    }

    /* Header */
    .app-header {
        background: linear-gradient(90deg, #ff6b6b, #feca57);
        color: white;
        padding: 20px;
        text-align: center;
        font-size: 24px;
        font-weight: bold;
        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        position: relative;
        z-index: 2;
    }

    /* Floating fruit decorations */
    .floating-fruit {
        position: absolute;
        width: 50px;
        animation: float 6s ease-in-out infinite;
        z-index: 1;
        pointer-events: none;
    }

    @keyframes float {
        0% { transform: translateY(0px) rotate(0deg); }
        50% { transform: translateY(-15px) rotate(10deg); }
        100% { transform: translateY(0px) rotate(0deg); }
    }

    .fruit1 { top: 10%; left: 5%; animation-delay: 0s; }
    .fruit2 { top: 15%; right: 10%; animation-delay: 1s; }
    .fruit3 { top: 25%; left: 30%; animation-delay: 2s; }
    .fruit4 { top: 40%; right: 5%; animation-delay: 3s; }
    .fruit5 { bottom: 10%; left: 10%; animation-delay: 1.5s; }
    .fruit6 { bottom: 15%; right: 20%; animation-delay: 2.5s; }
    .fruit7 { top: 60%; left: 5%; animation-delay: 0.5s; }
    .fruit8 { bottom: 30%; left: 60%; animation-delay: 1s; }
    .fruit9 { top: 70%; right: 35%; animation-delay: 2s; }
    .fruit10 { bottom: 5%; right: 60%; animation-delay: 3.5s; }

    /* Map styling */
    #map {
        width: 90%;
        height: 50vh;
        margin: 20px auto;
        border-radius: 15px;
        box-shadow: 0 8px 20px rgba(0,0,0,0.3);
    }

    /* Shop list panel */
    .shop-list {
        background: rgba(255, 255, 255, 0.95);
        width: 90%;
        margin: 0 auto 20px auto;
        padding: 15px;
        height: 40vh;
        overflow-y: auto;
        border-radius: 15px;
        box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    }

    .shop-list h3 { margin-bottom: 10px; font-size: 20px; color: #333; }
    .shop-list ul { list-style: none; }
    .shop-list li {
        padding: 12px;
        margin-bottom: 10px;
        border-radius: 10px;
        background: #fff3e0;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        transition: transform 0.2s;
    }
    .shop-list li:hover {
        transform: scale(1.02);
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    .shop-name { font-weight: bold; font-size: 16px; color: #ff6b6b; }
    .shop-distance { font-size: 13px; color: #555; margin-top: 2px; }
</style>
</head>
<body>

<!-- Floating fruits -->
<img src="https://img.icons8.com/color/96/apple.png" class="floating-fruit fruit1" alt="apple">
<img src="https://img.icons8.com/color/96/banana.png" class="floating-fruit fruit2" alt="banana">
<img src="https://img.icons8.com/color/96/strawberry.png" class="floating-fruit fruit3" alt="strawberry">
<img src="https://img.icons8.com/color/96/pineapple.png" class="floating-fruit fruit4" alt="pineapple">
<img src="https://img.icons8.com/color/96/grapes.png" class="floating-fruit fruit5" alt="grapes">
<img src="https://img.icons8.com/color/96/cherry.png" class="floating-fruit fruit6" alt="cherry">
<img src="https://img.icons8.com/color/96/watermelon.png" class="floating-fruit fruit7" alt="watermelon">
<img src="https://img.icons8.com/color/96/orange.png" class="floating-fruit fruit8" alt="orange">
<img src="https://img.icons8.com/color/96/kiwi.png" class="floating-fruit fruit9" alt="kiwi">
<img src="https://img.icons8.com/color/96/mango.png" class="floating-fruit fruit10" alt="mango">

<header class="app-header">
    üçé Nearby Fruit Shops
</header>

<div id="map"></div>

<div class="shop-list">
    <h3>Nearby Shops</h3>
    <ul id="shops">
        <li>Loading nearby fruit shops...</li>
    </ul>
</div>

<script>
    let map;

    const defaultLocation = { lat: 11.0168, lng: 76.9558 }; // Coimbatore

    // Sample shops in Coimbatore for demo
    const sampleShops = [
        { name: "Coimbatore Fruit Market", vicinity: "R S Puram, Coimbatore", location: { lat: 11.0170, lng: 76.9600 } },
        { name: "Fresh Fruits Coimbatore", vicinity: "Gandhipuram, Coimbatore", location: { lat: 11.0190, lng: 76.9550 } },
        { name: "Banana Hub", vicinity: "Peelamedu, Coimbatore", location: { lat: 11.0150, lng: 76.9500 } },
        { name: "Mango Corner", vicinity: "RS Puram, Coimbatore", location: { lat: 11.0200, lng: 76.9580 } },
        { name: "Tropical Fruits Coimbatore", vicinity: "Race Course, Coimbatore", location: { lat: 11.0135, lng: 76.9525 } },
    ];

    function initMap() {
        if (!navigator.geolocation) {
            alert("Geolocation not supported, showing Coimbatore.");
            initMapWithLocation(defaultLocation, sampleShops);
            return;
        }

        navigator.geolocation.getCurrentPosition(
            position => {
                const userLocation = {
                    lat: position.coords.latitude,
                    lng: position.coords.longitude
                };
                initMapWithLocation(userLocation, sampleShops);
            },
            error => {
                console.warn("Location denied. Showing default location.");
                initMapWithLocation(defaultLocation, sampleShops);
            }
        );
    }

    function initMapWithLocation(location, shops) {
        map = new google.maps.Map(document.getElementById("map"), {
            center: location,
            zoom: 15
        });

        new google.maps.Marker({
            position: location,
            map,
            title: "You are here"
        });

        // Display sample shops
        displayShops(shops);

        // Also try fetching real nearby shops
        findFruitShops(location);
    }

    function findFruitShops(location) {
        if (!google.maps.places) return;

        const service = new google.maps.places.PlacesService(map);

        service.nearbySearch(
            { location, radius: 2000, keyword: "fruit shop" },
            (results, status) => {
                if (status === google.maps.places.PlacesServiceStatus.OK) {
                    displayShops(results);
                }
            }
        );
    }

    function displayShops(shops) {
        const shopList = document.getElementById("shops");
        shopList.innerHTML = "";

        shops.forEach(shop => {
            const pos = shop.geometry?.location || shop.location;

            new google.maps.Marker({
                map,
                position: pos,
                title: shop.name
            });

            const li = document.createElement("li");
            li.innerHTML = `
                <div class="shop-name">${shop.name}</div>
                <div class="shop-distance">${shop.vicinity}</div>
            `;
            shopList.appendChild(li);
        });
    }
</script>

<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&libraries=places&callback=initMap" async defer></script>

</body>
</html>
